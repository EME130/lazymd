{
  "tools": [
    {
      "name": "open_file",
      "description": "Open a markdown (.md) or rndm (.rndm) file for editing. The file becomes the active document for all subsequent operations.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "Path to the markdown file to open"
          }
        },
        "required": ["path"]
      }
    },
    {
      "name": "read_document",
      "description": "Read the full content of the currently open document. Returns the raw markdown text.",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "write_document",
      "description": "Save the current document to disk. Optionally specify a different path to save-as.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "File path to save to (defaults to the current file path)"
          }
        }
      }
    },
    {
      "name": "list_headings",
      "description": "List all markdown headings (H1-H6) in the current document with their line numbers and levels.",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "edit_section",
      "description": "Replace the content of a markdown section (identified by heading). The heading line is preserved; only the body content between this heading and the next heading of equal or higher level is replaced.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "heading": {
            "type": "string",
            "description": "The heading text to find (case-insensitive, without # prefix)"
          },
          "content": {
            "type": "string",
            "description": "New content for the section body"
          }
        },
        "required": ["heading", "content"]
      }
    },
    {
      "name": "insert_text",
      "description": "Insert text at a specific line number or at the end of the document.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string",
            "description": "Text to insert"
          },
          "line": {
            "type": "integer",
            "description": "Line number to insert before (1-indexed). Omit to append at end."
          }
        },
        "required": ["text"]
      }
    },
    {
      "name": "delete_lines",
      "description": "Delete one or more lines from the document.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "start_line": {
            "type": "integer",
            "description": "First line to delete (1-indexed)"
          },
          "end_line": {
            "type": "integer",
            "description": "Last line to delete (1-indexed, inclusive). Defaults to start_line."
          }
        },
        "required": ["start_line"]
      }
    },
    {
      "name": "search_content",
      "description": "Search the document for lines matching a query (case-insensitive substring match). Returns matching lines with line numbers.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "Search query string"
          }
        },
        "required": ["query"]
      }
    },
    {
      "name": "get_structure",
      "description": "Get document metadata and structural overview including line count, byte size, file path, modification status, and a hierarchical outline of all headings.",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "read_section",
      "description": "Read a section by heading path. Navigate nested headings using '/' separator (e.g. 'Plan/Step 1/Subtask A'). Returns the heading line and all body content until the next same-or-higher-level heading.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "heading_path": {
            "type": "string",
            "description": "Slash-separated heading path (e.g. 'Plan/Step 1/Subtask A'). Case-insensitive."
          }
        },
        "required": ["heading_path"]
      }
    },
    {
      "name": "list_tasks",
      "description": "List all task checkboxes (- [ ] / - [x]) in the document. Optionally scope to a section and filter by completion status. Returns lines with checkbox state, task text, and breadcrumb location.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "section": {
            "type": "string",
            "description": "Optional heading path to scope the search (e.g. 'Plan/Step 1'). Omit to search entire document."
          },
          "status": {
            "type": "string",
            "enum": ["all", "pending", "done"],
            "description": "Filter by task status. Defaults to 'all'."
          }
        }
      }
    },
    {
      "name": "update_task",
      "description": "Toggle or set a task checkbox at a specific line. Changes '- [ ]' to '- [x]' or vice versa.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "line": {
            "type": "integer",
            "description": "Line number of the task checkbox (1-indexed)"
          },
          "done": {
            "type": "boolean",
            "description": "Set to true to mark done [x], false to mark pending [ ]"
          }
        },
        "required": ["line", "done"]
      }
    },
    {
      "name": "get_breadcrumb",
      "description": "Get the heading hierarchy (breadcrumb) for a specific line. Shows which section the line belongs to, formatted as 'Heading > Subheading > Sub-subheading'.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "line": {
            "type": "integer",
            "description": "Line number to get breadcrumb for (1-indexed)"
          }
        },
        "required": ["line"]
      }
    },
    {
      "name": "move_section",
      "description": "Relocate a section (heading + all content until next same-or-higher-level heading) to a new position. Specify either 'after' or 'before' to control placement relative to the target heading.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "heading": {
            "type": "string",
            "description": "Heading text of the section to move (case-insensitive, without # prefix)"
          },
          "after": {
            "type": "string",
            "description": "Place the section after this heading's section. Mutually exclusive with 'before'."
          },
          "before": {
            "type": "string",
            "description": "Place the section before this heading. Mutually exclusive with 'after'."
          }
        },
        "required": ["heading"]
      }
    },
    {
      "name": "read_section_range",
      "description": "Read lines from a section with line numbers. Like read_section but with optional offset/limit for precise editing context. Line offsets are relative to the section start (0 = heading line).",
      "inputSchema": {
        "type": "object",
        "properties": {
          "heading_path": {
            "type": "string",
            "description": "Slash-separated heading path (e.g. 'Plan/Step 1'). Case-insensitive."
          },
          "start_offset": {
            "type": "integer",
            "description": "Start offset within section (0 = heading line). Defaults to 0."
          },
          "end_offset": {
            "type": "integer",
            "description": "End offset within section (exclusive). Defaults to end of section."
          }
        },
        "required": ["heading_path"]
      }
    },
    {
      "name": "list_links",
      "description": "List all outgoing [[wiki-links]] from the current document. Returns each link target with its line number and whether it resolves to a known file.",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "get_backlinks",
      "description": "Find all files in the vault that link TO a given note via [[wiki-links]]. Scans all .md/.rndm files in the working directory.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "note": {
            "type": "string",
            "description": "Filename stem to find backlinks for (e.g. 'daily-note'). Defaults to the current open file."
          }
        }
      }
    },
    {
      "name": "get_graph",
      "description": "Return the vault's connection graph as JSON. Shows nodes (files), edges (wiki-links between them), and stats. Optionally scope to neighbors of a specific node.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "node": {
            "type": "string",
            "description": "Optional filename stem to center the graph on. Returns only neighbors within depth."
          },
          "depth": {
            "type": "integer",
            "description": "How many hops from the center node to include. Defaults to 2. Ignored without 'node'."
          }
        }
      }
    },
    {
      "name": "get_neighbors",
      "description": "Get all directly connected notes for a given note — both outgoing links and backlinks. Returns each neighbor with its name, path, direction (outgoing/incoming), and link counts. Great for exploring the local graph around a note.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "note": {
            "type": "string",
            "description": "Filename stem to find neighbors for (e.g. 'daily-note'). Defaults to the current open file."
          },
          "depth": {
            "type": "integer",
            "description": "How many hops to traverse. 1 = direct neighbors only (default), 2 = neighbors of neighbors, etc."
          }
        }
      }
    },
    {
      "name": "find_path",
      "description": "Find the shortest path between two notes in the knowledge graph. Returns the sequence of notes connecting them, or reports if no path exists. Useful for understanding how ideas connect.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "from": {
            "type": "string",
            "description": "Filename stem of the starting note"
          },
          "to": {
            "type": "string",
            "description": "Filename stem of the target note"
          }
        },
        "required": ["from", "to"]
      }
    },
    {
      "name": "get_orphans",
      "description": "List all orphan notes — files with zero incoming and zero outgoing [[wiki-links]]. These are isolated notes not connected to the knowledge graph.",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "get_hub_notes",
      "description": "Find the most connected notes in the vault, ranked by total link count (outgoing + incoming). Useful for identifying central topics and key knowledge nodes.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "type": "integer",
            "description": "Maximum number of results to return. Defaults to 10."
          }
        }
      }
    }
  ]
}
